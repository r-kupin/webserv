#-------------------------------------------------------------------------------
# www/
# ├── little_uploads
# └── unlimited_uploads
#-------------------------------------------------------------------------------
# > POST  HTTP/1.1
# > Host: localhost:4280
# > User-Agent: curl/7.81.0
# > Accept: */*
# > Content-Length: 16491
# > Content-Type: multipart/form-data; boundary=------------------------bc9b9723a11fa7e9
# /                 | 403 |
# /little_uploads   | 413 |
#-------------------------------------------------------------------------------
# server {
#         listen 4280;
#         server_name localhost;
# #         root /var/www; # real nginx
#         root test_resources/simple/www; # webserv
#
#         location /little_uploads {
#             client_max_body_size 1024;
# #             client_body_temp_path /var/www/little_uploads; # real nginx
#             client_body_temp_path test_resources/simple/www/little_uploads; # webserv;
#         }
#
#         location /little_uploads_X {
#             client_max_body_size 1024;
# #             client_body_temp_path /var/www/little_uploads_X; # real nginx
#             # this directory will be created by nginx !
#             client_body_temp_path test_resources/simple/www/little_uploads_X;  # webserv;
#         }
#
#         location /unlimited_uploads {
# #             client_body_temp_path /var/www/unlimited_uploads; # real nginx
#             client_body_temp_path test_resources/simple/www/unlimited_uploads; # webserv;
#         }
# }
server {
    listen 80;
    server_name your_domain.com;  # Replace with your domain or IP address

    location /upload {
        client_max_body_size 50M;  # Adjust the maximum allowed size for uploads

        # Save the uploaded file with a unique name
        set $upload_path /var/www/uploads/$request_body_file;

        # Save the entire request body to a file
        client_body_in_file_only clean;
        client_body_temp_path $upload_path;
        client_body_buffer_size 128K;

        # Other configurations, if needed

        # Respond with a success message
        return 200 "File uploaded successfully.\n";
    }
}
# 413 - file too large
# 403 - upload_pass without upload_store, no index
# 405 - upload_pass without upload_store w index || unappropriate method
# 415 - no Content-Type: multipart/form-data; boundary=------------------------7f6a0ace1e49ab5d
# 503 - can't create output : file failed to create output file "/var/www/upload/1/0000000001" for "2023-12-10-17-34-01.077-VBoxHeadless-1515430.log"
